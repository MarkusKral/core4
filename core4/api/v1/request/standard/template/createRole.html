<!DOCTYPE html>
<html lang="en">
<head>
  <script src="https://code.jquery.com/jquery-3.2.1.min.js"></script>
</head>
<body>


 <form id="createForm">
  Rolename:
  <input type="text" name="name" value="rolename"><br>
  email :
  <input type="text" name="email" value="max.mustermann@core4os.com"><br><br>
  Realname:
  <input type="text" name="realname" value="max mustermann"><br>
  Password:
  <input type="password" name="password" value=""><br>
  Permissions:
  <input type="text" name="perms" value="blank line seperated list"><br>
  Active:
  <input type="radio" name="is_active" value="True"><br><br>
  <input type="submit" value="Submit">
</form>

<div id="postResult"></div>

<a href="/core4/api/v1/roles"> CANCEL </a>

<script>
$( "#createForm" ).submit(function( event ) {
  // prevent html submit
  event.preventDefault();

  var $form = $( this ),
    name = $form.find('input[name="name"]').val(),
    realname = $form.find('input[name="realname"]').val(),
    email = $form.find('input[name="email"]').val(),
    is_active = $form.find('input[name="is_active"]').val(),
    password = $form.find('input[name="password"]').val(),
    perm = $form.find('input[name="perms"]').val().split("\n");

  //alert(name + email + is_active + perm )
  $.post("./roles",
  {
    name: name,
    realname: realname,
    email: email,
    is_active: is_active,
    perm : perm,
    password : password
  })
  .done(function( data ) {
    $( "#postResult" ).empty().append( '<span style="background-color: #00FF00">Sucessfully created user</span>' );
  })
  .fail(function( data ){
    $( "#postResult" ).empty().append( '<span style="background-color: #FF0000">Could not creat user</span>' );
  });
});
</script>


</body>


</html>
