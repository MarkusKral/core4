<!DOCTYPE html>
<html lang="en">
<head>
  <script src="https://code.jquery.com/jquery-3.2.1.min.js"></script>
</head>
<body>


 <table style="width:80%">
  <tr>
    <th>Rolename</th>
    <th>Realname</th>
    <th>Permissions</th>
    <th>Email</th>
  </tr>
  <tr>
    <td style="text-align:center">{{ role['name'] }} </a></td>
    <td style="text-align:center">{{ role['realname'] }}</td>
    <td style="text-align:center">{{ role['perm'] }}</td>
    <td style="text-align:center">
        {% if 'email' in role.keys() %}
            {{ role['email'] }}
        {% else %}
            No email given
        {% end %}
    </td>
  </tr>
</table>


 <a href="/core4/api/v1/roles/{{ role['_id'] }}?edit=1"> EDIT </a>
 <a href="/core4/api/v1/roles"> BACK </a>


 <script>
$( "#createForm" ).submit(function( event ) {
  // prevent html submit
  event.preventDefault();

  var $form = $( this ),
    name = $form.find('input[name="name"]').val(),
    email = $form.find('input[name="email"]').val(),
    is_active = $form.find('input[name="is_active"]').val(),
    password = $form.find('input[name="password"]').val(),
    perm = $form.find('input[name="perms"]').val().split("\n");

  //alert(name + email + is_active + perm )
  $.post("./roles",
  {
    name: name,
    email: email,
    is_active: is_active,
    perm : perm,
    password : password
  })
  .done(function( data ) {
    $( "#postResult" ).empty().append( '<span style="background-color: #00FF00">Sucessfully created user</span>' );
  })
  .fail(function( data ){
    $( "#postResult" ).empty().append( '<span style="background-color: #FF0000">Could not creat user</span>' );
  });
});
</script>


</body>


</html>
